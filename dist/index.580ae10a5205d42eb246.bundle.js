webpackJsonp([1],{0:function(e,t,n){e.exports=n(304)},27:function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a={},r=0,o=function(){return Object.keys(a).length},l=function(e){var t=[];return[].concat(n(e)).map(function(e){var n=new Blob([e],{type:String(e.type)}),o=window.URL.createObjectURL(n);a[String(r)]={blob:n,objectURL:o},t.push(r),r+=1}),t},i=function(e){var t=r;return a[t]={blob:e,objectURL:window.URL.createObjectURL(e)},r+=1,t},c=function(e,t){var n=String(e);return window.URL.revokeObjectURL(a[n].objectURL),a[n]={blob:t,objectURL:window.URL.createObjectURL(t)},n},u=function(){Object.keys(a).map(function(e){window.URL.revokeObjectURL(a[e].objectURL)}),a={}},d=function(e){return a[String(e)].objectURL},f=function(e){return a[String(e)].blob},s=function(e){var t=String(e);return window.URL.revokeObjectURL(a[t].objectURL),delete a[t],t};t["default"]={importBlob:i,removeAllBlob:u,getLength:o,updateBlob:c,importFiles:l,getObjectURL:d,getBlobObject:f,removeBlob:s}},49:function(e,t,n){(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function t(a,r,o,l,u){function s(a,o){if(null===a)return null;if(0===o)return a;var g,b;if("object"!=("undefined"==typeof a?"undefined":n(a)))return a;if(a instanceof c)g=new c;else if(a instanceof d)g=new d;else if(a instanceof f)g=new f(function(e,t){a.then(function(t){e(s(t,o-1))},function(e){t(s(e,o-1))})});else if(t.__isArray(a))g=[];else if(t.__isRegExp(a))g=new RegExp(a.source,i(a)),a.lastIndex&&(g.lastIndex=a.lastIndex);else if(t.__isDate(a))g=new Date(a.getTime());else{if(h&&e.isBuffer(a))return g=new e(a.length),a.copy(g),g;a instanceof Error?g=Object.create(a):"undefined"==typeof l?(b=Object.getPrototypeOf(a),g=Object.create(b)):(g=Object.create(l),b=l)}if(r){var y=m.indexOf(a);if(y!=-1)return p[y];m.push(a),p.push(g)}if(a instanceof c)for(var v=a.keys();;){var E=v.next();if(E.done)break;var w=s(E.value,o-1),x=s(a.get(E.value),o-1);g.set(w,x)}if(a instanceof d)for(var k=a.keys();;){var E=k.next();if(E.done)break;var O=s(E.value,o-1);g.add(O)}for(var _ in a){var C;b&&(C=Object.getOwnPropertyDescriptor(b,_)),C&&null==C.set||(g[_]=s(a[_],o-1))}if(Object.getOwnPropertySymbols)for(var I=Object.getOwnPropertySymbols(a),_=0;_<I.length;_++){var N=I[_],A=Object.getOwnPropertyDescriptor(a,N);(!A||A.enumerable||u)&&(g[N]=s(a[N],o-1),A.enumerable||Object.defineProperty(g,N,{enumerable:!1}))}if(u)for(var j=Object.getOwnPropertyNames(a),_=0;_<j.length;_++){var P=j[_],A=Object.getOwnPropertyDescriptor(a,P);A&&A.enumerable||(g[P]=s(a[P],o-1),Object.defineProperty(g,P,{enumerable:!1}))}return g}"object"===("undefined"==typeof r?"undefined":n(r))&&(o=r.depth,l=r.prototype,u=r.includeNonEnumerable,r=r.circular);var m=[],p=[],h="undefined"!=typeof e;return"undefined"==typeof r&&(r=!0),"undefined"==typeof o&&(o=1/0),s(a,o)}function a(e){return Object.prototype.toString.call(e)}function r(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"[object Date]"===a(e)}function o(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"[object Array]"===a(e)}function l(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"[object RegExp]"===a(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var c;try{c=Map}catch(u){c=function(){}}var d;try{d=Set}catch(u){d=function(){}}var f;try{f=Promise}catch(u){f=function(){}}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=a,t.__isDate=r,t.__isArray=o,t.__isRegExp=l,t.__getRegExpFlags=i,t}();"object"===n(t)&&t.exports&&(t.exports=a)}).call(t,n(16).Buffer,n(283)(e))},77:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=t.Button=t.Row=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(15),l=a(o),i=function(e){var t=e.color,n=e.size,a=e["float"],o=Boolean(e.disabled),i=Boolean(e.active),c="btn",u={};return c+=t?" btn-"+t:"",c+=n?" btn-"+n:"",c+=a?" float-"+a:"",c+=i?" active":"",Object.keys(e).map(function(t){"color"!==t&&"size"!==t&&"float"!==t&&"active"!==t&&"disabled"!==t&&(u[t]=e[t])}),o===!0&&(u.disabled=!0),l["default"].createElement("button",r({className:c},u))},c=function(e){var t=e.fw,n=e.name,a="fa fa-"+n;return a=Boolean(t)?a+" fa-fw":a+"",l["default"].createElement("span",{className:a})},u=function(e){return l["default"].createElement("div",r({className:"row"},e))};t.Row=u,t.Button=i,t.Icon=c},78:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.undoable=void 0;var o=n(49),l=a(o),i=n(148),c=a(i),u=n(27),d=a(u),f=10,s=function(e){var t={past:[],present:e(void 0,{}),future:[]};return function(n,a){var o=n.past,i=void 0===o?t.past:o,u=n.present,s=void 0===u?t.present:u,m=n.future,p=void 0===m?t.future:m,h={past:i,present:s,future:p};if("RESET"===a.type)return d["default"].removeAllBlob(),window.onbeforeunload=void 0,(0,l["default"])(t);if("UNDO"===a.type){if(0===i.length)return h;var g=i[i.length-1],b=i.slice(0,i.length-1),y=p.length===f?[].concat(r(p.slice(1)),[s]):[].concat(r(p),[s]);return(0,l["default"])({past:b,present:g,future:y})}if("REDO"===a.type){if(0===p.length)return h;var v=p.pop(),E=[].concat(r(i),[s]);return(0,l["default"])({past:E,present:v,future:p})}var w=e(s,a);if((0,c["default"])(w,s,{strict:!0}))return h;var x=[].concat(r(i),[(0,l["default"])(s)]);return x=x.length>f?x.slice(1):x,window.onbeforeunload=function(e){return confirm("确定退出吗？")},{past:x,present:w,future:[]}}},m=function(e,t){return function(){var n=arguments.length<=0||void 0===arguments[0]?e:arguments[0],a=arguments[1];return a.type in t?t[a.type]((0,l["default"])(n),a):n}};t.undoable=s,t["default"]=m},146:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var r=n(39),o=(a(r),{SAVE_BOOKINFO:"SAVE_BOOKINFO",ADD_CREATOR:"ADD_CREATOR",REMOVE_CREATOR:"REMOVE_CREATOR",SAVE_CONTENTS_SETTING:"SAVE_CONTENTS_SETTING",RESET:"RESET"}),l=function(e,t,n,a,r){return{type:o.SAVE_BOOKINFO,bookInfo:{id:e,title:t,creator:n,subject:a,publisher:r}}},i=function(e){return{type:o.ADD_CREATOR,index:e}},c=function(e){return{type:o.REMOVE_CREATOR,index:e}},u=function(e){return{type:o.SAVE_CONTENTS_SETTING,data:e}},d=function(){return{type:o.RESET}};t.ActionType=o,t["default"]={saveBookInfo:l,addCreator:i,removeCreator:c,saveContentsSetting:u,reset:d}},147:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var r=n(39),o=(a(r),n(27)),l=a(o),i={IMPORT_PAGES:"IMPORT_PAGES",SAVE_VIEWPORT_SETTING:"SAVE_VIEWPORT_SETTING",SET_COVER_PAGE:"SET_COVER_PAGE",MOVE_TO_NEXT_PAGE:"MOVE_TO_NEXT_PAGE",MOVE_TO_PREVIOUS_PAGE:"MOVE_TO_PREVIOUS_PAGE",CHANGE_PAGE_INDEX:"CHANGE_PAGE_INDEX",REMOVE_PAGE:"REMOVE_PAGE",ADD_BLANK_PAGE:"ADD_BLANK_PAGE",CUT_PAGE:"CUT_PAGE",CHANGE_IMAGE_POSITION:"CHANGE_IMAGE_POSITION",CHANGE_PAGE_BACKGROUND_COLOR:"CHANGE_PAGE_BACKGROUND_COLOR"},c=function(e){return function(t){return{type:e,index:t}}},u=function(e){var t=l["default"].importFiles(e);return{type:i.IMPORT_PAGES,newFileIndexList:t}},d=function(e,t,n,a,r){return{type:i.SAVE_VIEWPORT_SETTING,width:e,height:t,position:n,backgroundColor:a,direction:r}},f=c(i.REMOVE_PAGE),s=c(i.SET_COVER_PAGE),m=function(e,t){return{type:i.CHANGE_PAGE_INDEX,originIndex:e,newIndex:t}},p=function(e){return function(t,n){var a=n().present.pageInfo.list[e],r=l["default"].getBlobObject(a).type,o=new Image,c=document.createElement("canvas"),u=c.getContext("2d"),d=[];new Promise(function(e){o.onload=e}).then(function(e){return c.width=o.width>>1,c.height=o.height,u.drawImage(o,0,0),new Promise(function(e){c.toBlob(function(t){d.push(t),e()},r)})}).then(function(){return u.drawImage(o,0-c.width,0),new Promise(function(e){c.toBlob(function(t){d.push(t),e()},r)})}).then(function(){var n=l["default"].importBlob(d[0]),a=l["default"].importBlob(d[1]);t({type:i.CUT_PAGE,index:e,blobIndex:[n,a]})}),o.src=l["default"].getObjectURL(a)}},h=function(e,t){return function(n){var a=document.createElement("canvas"),r=a.getContext("2d");a.width=1,a.height=1,r.fillStyle="white"===t?"#fff":"#000",r.fillRect(0,0,1,1),r.beginPath(),a.toBlob(function(t){var a=l["default"].importBlob(t);n({type:i.ADD_BLANK_PAGE,index:e,newBlobIndex:a})},"image/png")}},g=function(e){return{type:i.CHANGE_IMAGE_POSITION,position:e}},b=function(e){return{type:i.CHANGE_PAGE_BACKGROUND_COLOR,color:e}};t.ActionType=i,t["default"]={importPages:u,addBlankPage:h,setCover:s,changePageIndex:m,cutPage:p,removePage:f,saveViewportSetting:d,changeImagePosition:g,changeBackgroundColor:b}},148:function(e,t,n){"use strict";function a(e){return null===e||void 0===e}function r(e){return!(!e||"object"!==("undefined"==typeof e?"undefined":l(e))||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}function o(e,t,n){var o,f;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(u(e))return!!u(t)&&(e=i.call(e),t=i.call(t),d(e,t,n));if(r(e)){if(!r(t))return!1;if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}try{var s=c(e),m=c(t)}catch(p){return!1}if(s.length!=m.length)return!1;for(s.sort(),m.sort(),o=s.length-1;o>=0;o--)if(s[o]!=m[o])return!1;for(o=s.length-1;o>=0;o--)if(f=s[o],!d(e[f],t[f],n))return!1;return("undefined"==typeof e?"undefined":l(e))===("undefined"==typeof t?"undefined":l(t))}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=Array.prototype.slice,c=n(150),u=n(149),d=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=("undefined"==typeof e?"undefined":l(e))&&"object"!=("undefined"==typeof t?"undefined":l(t))?n.strict?e===t:e==t:o(e,t,n))}},149:function(e,t){"use strict";function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function a(e){return e&&"object"==("undefined"==typeof e?"undefined":r(e))&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=o?n:a,t.supported=n,t.unsupported=a},150:function(e,t){"use strict";function n(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:n,t.shim=n},283:function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},297:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(146),o=a(r),l=n(147),i=a(l),c=n(298),u=a(c);t["default"]={mangaInfo:o["default"],pageInfo:i["default"],undo:u["default"]}},298:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={UNDO:"UNDO",REDO:"REDO"},a=function(){return{type:n.UNDO}},r=function(){return{type:n.REDO}};t.ActionType=n,t["default"]={undo:a,redo:r}},299:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(15),f=a(d),s=n(55),m=n(34),p=n(49),h=(a(p),n(297)),g=a(h),b=n(27),y=(a(b),n(303)),v=a(y),E=n(301),w=a(E),x=n(300),k=a(x),O=n(77),_={READY:"READY",WORKING:"WORKING"},C=function(e){function t(e){o(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={generateStatus:_.READY},n.handleGetFile=n.handleGetFile.bind(n),n.handleClickAddBlankPage=n.handleClickAddBlankPage.bind(n),n.handleClickResetButton=n.handleClickResetButton.bind(n),n.handleClickGenerateButton=n.handleClickGenerateButton.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=e.props,n=t.State,a=t.Action,r=e.props.handleClickShowModal,o=e.state.generateStatus,l=!1;return 0!==n.pageInfo.list.length&&o!==_.WORKING||(l=!0),f["default"].createElement("nav",{className:"navbar sticky-top navbar-inverse bg-inverse bg-faded"},f["default"].createElement("div",{className:"container"},f["default"].createElement(O.Button,{color:"secondary",onClick:this.handleClickImportButton},f["default"].createElement(O.Icon,{name:"folder-open",fw:"true"})),f["default"].createElement("input",{id:"input-upload",type:"file",value:"",accept:"image/jpeg,image/png",multiple:"multiple",onChange:this.handleGetFile,style:{display:"none"}}),"  ",f["default"].createElement("div",{className:"btn-toolbar",style:{display:"inline-block"}},f["default"].createElement("div",{className:"btn-group"},f["default"].createElement(O.Button,{title:"Book Info",color:"secondary","data-modal-name":x.ModalName.BookInfo,onClick:r},f["default"].createElement(O.Icon,{name:"book",fw:"true"})),f["default"].createElement(O.Button,{title:"Content",color:"secondary","data-modal-name":x.ModalName.ContentTable,onClick:r},f["default"].createElement(O.Icon,{name:"list",fw:"true"})),f["default"].createElement(O.Button,{title:"Page Setting",color:"secondary","data-modal-name":x.ModalName.Viewport,onClick:r},f["default"].createElement(O.Icon,{name:"eye",fw:"true"})))),"  ",f["default"].createElement("div",{className:"btn-toolbar",style:{display:"inline-block"}},f["default"].createElement("div",{className:"btn-group"},f["default"].createElement(O.Button,{title:"Add Blank Page(white)",color:"secondary","data-color":"white",onClick:this.handleClickAddBlankPage},f["default"].createElement(O.Icon,{name:"square-o",fw:"true"})),f["default"].createElement(O.Button,{title:"Add Blank Page(black)",color:"secondary","data-color":"black",onClick:this.handleClickAddBlankPage},f["default"].createElement(O.Icon,{name:"square",fw:"true"})))),"  ",f["default"].createElement("div",{className:"btn-toolbar",style:{display:"inline-block"}},f["default"].createElement("div",{className:"btn-group"},f["default"].createElement(O.Button,c({title:"Undo",color:"secondary"},n.undoable?{onClick:a.undo}:{disabled:!0}),f["default"].createElement(O.Icon,{fw:"true",name:"undo"})),f["default"].createElement(O.Button,c({title:"Redo",color:"secondary"},n.redoable?{onClick:a.redo}:{disabled:!0}),f["default"].createElement(O.Icon,{fw:"true",name:"rotate-right"})))),"  ",f["default"].createElement(O.Button,{title:"Reset Workspace",color:"secondary",onClick:this.handleClickResetButton},f["default"].createElement(O.Icon,{fw:"true",name:"circle"})),f["default"].createElement(O.Button,c({color:"secondary",style:{"float":"right"}},l?{disabled:!0}:{onClick:this.handleClickGenerateButton}),o===_.WORKING?f["default"].createElement("span",{className:"fa fa-spinner fa-pulse"}):f["default"].createElement(O.Icon,{fw:"true",name:"download"}))))}},{key:"handleClickImportButton",value:function(){document.getElementById("input-upload").click()}},{key:"handleGetFile",value:function(e){var t=e.currentTarget,n=this.props.Action,a=[].concat(r(t.files)).filter(function(e){return t.accept.indexOf(e.type)>-1});a.length&&n.importPages(a)}},{key:"handleClickGenerateButton",value:function(e){var t=this;new Promise(function(e){return t.setState({generateStatus:_.WORKING},e)}).then(function(){return(0,v["default"])(t.props.State)}).then(function(){t.setState({generateStatus:_.READY})})["catch"](function(e){t.setState({generateStatus:_.READY})})}},{key:"handleClickAddBlankPage",value:function(e){var t=Number(prompt("index: (number only)")),n=e.currentTarget.dataset.color;!isNaN(t)&&t>0&&this.props.Action.addBlankPage(t-1,n)}},{key:"handleClickResetButton",value:function(e){var t=window.confirm("Reset workspace? (cant undo)");t&&this.props.Action.reset()}}]),t}(d.Component),I=function(e){function t(e){o(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={showModal:x.ModalName.None},n.handleShowModal=n.handleShowModal.bind(n),n.handleHideModal=n.handleHideModal.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.State,n=e.Action;return f["default"].createElement("div",{style:{width:"100%",height:"100%"}},f["default"].createElement(C,{State:t,Action:n,handleClickShowModal:this.handleShowModal}),f["default"].createElement("div",{className:"container",style:{marginTop:20}},t.pageInfo.list.length>0?f["default"].createElement(w["default"],{State:t,Action:n}):f["default"].createElement("div",{className:"jumbotron"},f["default"].createElement("div",{className:"display-3 text-center"},f["default"].createElement(O.Button,{title:"import images",color:"secondary",onClick:this.handleClickImportButton},f["default"].createElement("br",null),f["default"].createElement("span",{className:"fa fa-fw fa-folder-open fa-5x"}),f["default"].createElement("br",null),f["default"].createElement("br",null),f["default"].createElement("h3",null,"Import Images")))),f["default"].createElement("hr",null),f["default"].createElement("div",{className:"row",style:{marginBottom:20}},f["default"].createElement("div",{className:"col d-flex align-items-center justify-content-start",style:{whiteSpace:"pre-wrap"}},"Original author: 2017 wing-kai@Github\nModifier: maristie"),f["default"].createElement("div",{className:"col d-flex align-items-center justify-content-center"},f["default"].createElement("img",{src:"logo.png",width:"30",height:"30",alt:"logo"})),f["default"].createElement("div",{className:"col d-flex align-items-center justify-content-end"},f["default"].createElement("a",{href:"https://github.com/maristie/epub-manga-creator/blob/gh-pages/about.md"},"About"),"\xA0\xA0\xA0\xA0\xA0\xA0",f["default"].createElement("a",{href:"https://maristie.com/epub-manga-creator/howto.html"},"How to"),"\xA0\xA0\xA0\xA0\xA0\xA0",f["default"].createElement("iframe",{style:{border:"none"},src:"https://ghbtns.com/github-btn.html?user=maristie&repo=epub-manga-creator&type=star&count=true",frameBorder:"0",scrolling:"0",width:"80px",height:"20px"}))),f["default"].createElement(k["default"],{name:this.state.showModal,State:t,Action:n,handleHideModal:this.handleHideModal})))}},{key:"handleClickImportButton",value:function(){document.getElementById("input-upload").click()}},{key:"handleShowModal",value:function(e){var t=e.currentTarget.dataset.modalName;this.setState({showModal:t})}},{key:"handleHideModal",value:function(){this.setState({showModal:x.ModalName.None})}}]),t}(d.Component);t["default"]=(0,s.connect)(function(e){var t=e.present,n=e.past,a=e.future;return{State:{mangaInfo:t.mangaInfo,pageInfo:t.pageInfo,undoable:n.length>0,redoable:a.length>0}}},function(e){return{Action:(0,m.bindActionCreators)(c({},g["default"].pageInfo,g["default"].mangaInfo,g["default"].undo),e)}})(I)},300:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ModalName=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(15),f=a(d),s=n(77),m=n(49),p=a(m),h={None:"None",BookInfo:"BookInfo",ContentTable:"ContentTable",Viewport:"Viewport"},g={display:"block",background:"rgba(0, 0, 0, 0.5)"},b=function(e){return e.stopPropagation()},y=function(e){return f["default"].createElement("div",{className:"modal",style:g,onClick:e.handleHideModal},f["default"].createElement("div",{className:"modal-dialog",onClick:b},f["default"].createElement("div",{className:"modal-content"},f["default"].createElement("div",{className:"modal-header"},f["default"].createElement("h5",{className:"modal-title"},e.title),f["default"].createElement("button",{type:"button",className:"close",onClick:e.handleHideModal},f["default"].createElement("span",{"aria-hidden":"true"},"×"))),f["default"].createElement("div",{className:"modal-body"},e.children))))},v=function(e){return f["default"].createElement("div",{className:"form-group row"},f["default"].createElement("small",{className:"col-3"},e.label),f["default"].createElement("div",{className:"col-7"},e.children))},E=function(e){function t(e){o(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.state={creator:[].concat(r(e.State.mangaInfo.bookInfo.creator))},n.handleChangeCreatorName=n.handleChangeCreatorName.bind(n),n.handleBlurInput=n.handleBlurInput.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.State.mangaInfo.bookInfo,a=t.Action;return f["default"].createElement(y,{title:"Book Info",handleHideModal:this.props.handleHideModal},f["default"].createElement(v,{label:"ID"},f["default"].createElement("input",{defaultValue:n.id,className:"form-control-sm form-control",type:"text",ref:"id",onBlur:this.handleBlurInput})),f["default"].createElement(v,{label:"Title"},f["default"].createElement("input",{defaultValue:n.title,className:"form-control-sm form-control",type:"text",ref:"title",onBlur:this.handleBlurInput})),this.state.creator.map(function(t,n){return f["default"].createElement("div",{className:"form-group row",key:n},f["default"].createElement("small",{className:"col-3"},"Creator "+(n+1)),f["default"].createElement("div",{className:"col"},f["default"].createElement("input",{"data-index":n,value:e.state.creator[n],className:"form-control-sm form-control",type:"text",onChange:e.handleChangeCreatorName,onBlur:e.handleBlurInput})),f["default"].createElement("div",{className:"col-2"},f["default"].createElement("div",{className:"btn-toolbar"},f["default"].createElement("div",{className:"btn-group"},f["default"].createElement("button",{className:"btn btn-sm btn-secondary",onClick:function(e){return a.addCreator(n)}},f["default"].createElement(s.Icon,{name:"plus"})),e.state.creator.length<2?f["default"].createElement("button",{className:"btn btn-sm btn-secondary",disabled:!0},f["default"].createElement(s.Icon,{name:"minus"})):f["default"].createElement("button",{className:"btn btn-sm btn-secondary",onClick:function(e){return a.removeCreator(n)}},f["default"].createElement(s.Icon,{name:"minus"}))))))}),f["default"].createElement(v,{label:"Subject"},f["default"].createElement("input",{defaultValue:n.subject,className:"form-control-sm form-control",type:"text",list:"datalist_subject",ref:"subject",onBlur:this.handleBlurInput}),f["default"].createElement("datalist",{id:"datalist_subject"},f["default"].createElement("option",{value:"少年"}),f["default"].createElement("option",{value:"少女"}),f["default"].createElement("option",{value:"青年"}),f["default"].createElement("option",{value:"同人誌"}),f["default"].createElement("option",{value:"漫画"}),f["default"].createElement("option",{value:"成年コミック"}))),f["default"].createElement(v,{label:"Publisher"},f["default"].createElement("input",{defaultValue:n.publisher,className:"form-control-sm form-control",type:"text",list:"datalist_publisher",ref:"publisher",onBlur:this.handleBlurInput}),f["default"].createElement("datalist",{id:"datalist_publisher"},f["default"].createElement("option",{value:"KADOKAWA"}),f["default"].createElement("option",{value:"講談社"}),f["default"].createElement("option",{value:"集英社"}),f["default"].createElement("option",{value:"小学館"}),f["default"].createElement("option",{value:"小学館集英社プロダクション"}),f["default"].createElement("option",{value:"少年画報社"}),f["default"].createElement("option",{value:"松文館"}),f["default"].createElement("option",{value:"日本文芸社"}),f["default"].createElement("option",{value:"白泉社"}),f["default"].createElement("option",{value:"芳文社"}),f["default"].createElement("option",{value:"ワニマガジン社"}),f["default"].createElement("option",{value:"FAKKU"}))))}},{key:"componentWillReceiveProps",value:function(e){this.setState({creator:[].concat(r(e.State.mangaInfo.bookInfo.creator))})}},{key:"handleChangeCreatorName",value:function(e){var t=e.currentTarget,n=[].concat(r(this.state.creator));n[Number(t.dataset.index)]=t.value,this.setState({creator:n})}},{key:"handleBlurInput",value:function(e){var t=this.refs;this.props.Action.saveBookInfo(t.id.value,t.title.value,this.state.creator,t.subject.value,t.publisher.value)}}]),t}(d.Component),w=function(e){return f["default"].createElement("div",{className:"row",style:{marginTop:10}},f["default"].createElement("div",{className:"col"},f["default"].createElement("input",{"data-index":e.index,type:"number",min:"1",value:e.refindex,className:"form-control form-control-sm",onChange:e.handleChangeContentRefIndex})),f["default"].createElement("div",{className:"col-6"},f["default"].createElement("input",{"data-index":e.index,type:"text",value:e.text,className:"form-control form-control-sm",onChange:e.handleChangeContentText})),f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"btn-toolbar"},f["default"].createElement("div",{className:"btn-group"},f["default"].createElement(s.Button,{size:"sm",color:"secondary","data-index":e.index,onClick:e.handleClickPlusButton},f["default"].createElement(s.Icon,{name:"plus"})),e.addOnly?[f["default"].createElement(s.Button,{key:"b1",size:"sm",color:"secondary",disabled:!0},f["default"].createElement(s.Icon,{name:"minus"})),f["default"].createElement(s.Button,{key:"b2",size:"sm",color:"secondary",disabled:!0},f["default"].createElement(s.Icon,{name:"angle-up"})),f["default"].createElement(s.Button,{key:"b3",size:"sm",color:"secondary",disabled:!0},f["default"].createElement(s.Icon,{name:"angle-down"}))]:[f["default"].createElement(s.Button,{key:"b1",size:"sm",color:"secondary","data-index":e.index,onClick:e.handleClickMinusButton},f["default"].createElement(s.Icon,{name:"minus"})),f["default"].createElement(s.Button,{key:"b2",size:"sm",color:"secondary","data-index":e.index,onClick:e.handleClickUpButton},f["default"].createElement(s.Icon,{name:"angle-up"})),f["default"].createElement(s.Button,{key:"b3",size:"sm",color:"secondary","data-index":e.index,onClick:e.handleClickDownButton},f["default"].createElement(s.Icon,{name:"angle-down"}))]))))},x=function(e){function t(e){o(this,t);var n=l(this,Object.getPrototypeOf(t).call(this,e));return n.handleChangeContentRefIndex=n.handleChangeContentRefIndex.bind(n),n.handleChangeContentText=n.handleChangeContentText.bind(n),n.handleClickUpButton=n.handleClickUpButton.bind(n),n.handleClickDownButton=n.handleClickDownButton.bind(n),n.handleClickPlusButton=n.handleClickPlusButton.bind(n),n.handleClickMinusButton=n.handleClickMinusButton.bind(n),n.state={contents:(0,p["default"])(e.State.mangaInfo.contents)},n}return i(t,e),u(t,[{key:"render",value:function(){var e=this;return f["default"].createElement(y,{title:"Content",handleHideModal:this.props.handleHideModal},f["default"].createElement("div",{className:"row"},f["default"].createElement("div",{className:"col"},"Index"),f["default"].createElement("div",{className:"col-6"},"Title"),f["default"].createElement("div",{className:"col"})),this.state.contents.map(function(t,n){return f["default"].createElement(w,c({key:n,index:n,addOnly:1===e.state.contents.length,handleChangeContentRefIndex:e.handleChangeContentRefIndex,handleChangeContentText:e.handleChangeContentText,handleClickUpButton:e.handleClickUpButton,handleClickDownButton:e.handleClickDownButton,handleClickPlusButton:e.handleClickPlusButton,handleClickMinusButton:e.handleClickMinusButton},t))}))}},{key:"componentWillReceiveProps",value:function(e){this.setState({contents:(0,p["default"])(e.State.mangaInfo.contents)})}},{key:"handleChangeContentRefIndex",value:function(e){var t=e.currentTarget,n=(0,p["default"])(this.state.contents);n[Number(t.dataset.index)].refindex=Number(t.value),this.props.Action.saveContentsSetting(n)}},{key:"handleChangeContentText",value:function(e){var t=e.currentTarget,n=(0,p["default"])(this.state.contents);n[Number(t.dataset.index)].text=t.value,this.props.Action.saveContentsSetting(n)}},{key:"handleClickUpButton",value:function(e){var t=Number(e.currentTarget.dataset.index);if(0!==t){var n=(0,p["default"])(this.state.contents),a=c({},n[t]),r=c({},n[t-1]);n.splice(t-1,2,a,r),this.props.Action.saveContentsSetting(n)}}},{key:"handleClickDownButton",value:function(e){var t=Number(e.currentTarget.dataset.index),n=(0,p["default"])(this.state.contents);if(t+1!==n.length){var a=c({},n[t]),r=c({},n[t+1]);n.splice(t,2,r,a),this.props.Action.saveContentsSetting(n)}}},{key:"handleClickPlusButton",value:function(e){var t=Number(e.currentTarget.dataset.index),n=(0,p["default"])(this.state.contents),a=c({},n[t]);n.splice(t,1,a,{refindex:"",text:""}),this.props.Action.saveContentsSetting(n)}},{key:"handleClickMinusButton",value:function(e){var t=Number(e.currentTarget.dataset.index),n=(0,p["default"])(this.state.contents);n.splice(t,1),this.props.Action.saveContentsSetting(n)}}]),t}(d.Component),k=function(e,t){return function(n){t.saveViewportSetting(e.width.value,e.height.value,e.position.value,e.backgroundColor.value,e.direction.value)}},O=function(e){return f["default"].createElement("div",{className:"row"},f["default"].createElement("div",{className:"col-5 d-flex align-items-center justify-content-end"},e.label),f["default"].createElement("div",{className:"col"},e.children))},_=function(e){var t=e.Action,n=e.State.pageInfo.viewport,a=e.State.pageInfo.direction,r={
width:void 0,height:void 0,position:void 0,backgroundColor:void 0,direction:void 0};return f["default"].createElement(y,{title:"Page Setting",handleHideModal:e.handleHideModal},f["default"].createElement(O,{label:"Width (px)"},f["default"].createElement("input",{defaultValue:n.width,type:"number",className:"form-control",ref:function(e){return r.width=e},onChange:k(r,t)})),f["default"].createElement("p",null),f["default"].createElement(O,{label:"Height (px)"},f["default"].createElement("input",{defaultValue:n.height,type:"number",className:"form-control",ref:function(e){return r.height=e},onChange:k(r,t)})),f["default"].createElement("p",null),f["default"].createElement(O,{label:"Image Position"},f["default"].createElement("select",{className:"form-control custom-select",defaultValue:n.position,ref:function(e){return r.position=e},onChange:k(r,t)},f["default"].createElement("option",{value:"stretch"},"Stretch"),f["default"].createElement("option",{value:"fill"},"Fill"),f["default"].createElement("option",{value:"fit"},"Fit"))),f["default"].createElement("p",null),f["default"].createElement(O,{label:""},"stretch"===n.position?f["default"].createElement("img",{src:"images/exp4.png",width:"200",height:"100"}):"fill"===n.position?f["default"].createElement("img",{src:"images/exp1.png",width:"200",height:"100"}):f["default"].createElement("img",{src:"images/exp2.png",width:"200",height:"100"})),f["default"].createElement("p",null),f["default"].createElement(O,{label:"Background Color"},f["default"].createElement("select",{className:"form-control custom-select",defaultValue:n.backgroundColor,ref:function(e){return r.backgroundColor=e},onChange:k(r,t)},f["default"].createElement("option",{value:"white"},"White"),f["default"].createElement("option",{value:"black"},"Black"))),f["default"].createElement("p",null),f["default"].createElement(O,{label:""},f["default"].createElement("img",{src:"white"===n.backgroundColor?"images/exp3.png":"images/exp5.png",width:"200",height:"100"})),f["default"].createElement("p",null),f["default"].createElement(O,{label:"Progression Direction"},f["default"].createElement("select",{className:"form-control custom-select",defaultValue:a,ref:function(e){return r.direction=e},onChange:k(r,t)},f["default"].createElement("option",{value:"right"},"Right（Japan Style）"),f["default"].createElement("option",{value:"left"},"Left"))))},C=function(e){switch(e.name){case h.BookInfo:return f["default"].createElement(E,e);case h.ContentTable:return f["default"].createElement(x,e);case h.Viewport:return f["default"].createElement(_,e);default:return null}};t.ModalName=h,t["default"]=C},301:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(15),u=a(c),d=n(27),f=a(d),s=n(77),m=function(e){return function(t){var n=Number(t.currentTarget.dataset.index),a=Number(prompt("New Index (number only) :"));!isNaN(a)&&a>0&&e.changePageIndex(n,a-1)}},p=function(e){return function(t){var n=Number(t.currentTarget.dataset.index);window.confirm("Delete Page "+(n+1)+" ?")&&e.removePage(n)}},h=function(e){return u["default"].createElement("div",{style:{marginTop:20},className:"card"})},g=function(e){var t=e.Action,n=e.index,a=e["float"];return u["default"].createElement("div",{className:"card",style:{marginTop:20}},u["default"].createElement("img",{className:"card-image align-self-"+("left"===a?"start":"end"),src:e.src,alt:"",width:"130",height:"180"}),u["default"].createElement("div",{className:"card-img-overlay d-flex",style:{cursor:"default"}},u["default"].createElement("small",{className:"page-number card-text text-white rounded",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",border:"solid 1px #fff"}}," ",e.index+1," "),u["default"].createElement("p",{className:"control card-text rounded",style:{backgroundColor:"rgba(0, 0, 0, 0.7)"}},"  ",u["default"].createElement("a",{href:"javascript:;",className:"text-white",onClick:function(e){return t.setCover(n)}},u["default"].createElement(s.Icon,{name:"book"})),"  ",u["default"].createElement("a",{href:"javascript:;",className:"text-white",onClick:function(e){return t.cutPage(n)}},u["default"].createElement(s.Icon,{name:"cut"})),"  ",u["default"].createElement("a",{href:"javascript:;",className:"text-white","data-index":n,onClick:p(t)},u["default"].createElement(s.Icon,{name:"times"})),"  ",u["default"].createElement("a",{href:"javascript:;",className:"text-white","data-index":n,onClick:m(t)},u["default"].createElement("span",{className:"fa fa-reorder"})),"  ")))},b=function(e){function t(e){return r(this,t),o(this,Object.getPrototypeOf(t).call(this,e))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.Action,n=e.State,a=n.pageInfo.direction,r="right"===a?"unshift":"push",o=[],l=[],i=[],c=n.pageInfo.list.length-1;return n.pageInfo.list.map(function(e,n){if(0===n&&i[r](u["default"].createElement(h,{key:"blankCard-head"})),2===i.length?(i=[],i[r](u["default"].createElement(g,{"float":"left"===a?"right":"left",src:f["default"].getObjectURL(e),index:n,Action:t,key:n}))):i[r](u["default"].createElement(g,{"float":"left"===a?"left":"right",src:f["default"].getObjectURL(e),index:n,Action:t,key:n})),n===c&&1===i.length&&i[r](u["default"].createElement(h,{key:"blankCard-tail"})),2==i.length&&l[r](u["default"].createElement("div",{className:"col",key:"cardgroup-"+n},u["default"].createElement("div",{className:"card-group"},i))),n===c&&l.length<3)for(var d=3-l.length;d-- >0;)l[r](u["default"].createElement("div",{className:"col",key:"emptyCol-"+d}));3===l.length&&(o.push(u["default"].createElement(s.Row,{key:"Row-"+o.length},l)),l=[])}),u["default"].createElement("div",{className:"card"},u["default"].createElement("div",{className:"card-block"},o))}}]),t}(c.Component);t["default"]=b},302:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),o=n(137),l=a(o),i=n(305),c=a(i),u={},d=(0,r.compose)((0,r.applyMiddleware)(l["default"]),window.devToolsExtension?window.devToolsExtension({serialize:function(e,t){return"Symbol"==typeof t?String(t):t}}):function(e){return e})(r.createStore),f=d(c["default"],u);t["default"]=f},303:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(39),o=a(r),l=n(27),i=a(l),c=n(308),u=a(c),d=function(e){var t=/"|&|'|\!|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g;return e.replace(t,function(e){var t=e.charCodeAt(0),n=["&#"];return t=32==t?160:t,n.push(t),n.push(";"),n.join("")})},f=function(e,t){for(var n=String(e),a=t-n.length;a-- >0;)n="0"+n;return n},s=function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",n=36;n-- >0;)t+=27===n||22===n||17===n||12===n?"-":String(e[Math.ceil(35*Math.random())]);return t},m=function(e){var t=new o["default"],n=""===e.mangaInfo.bookInfo.id.trim()?s():e.mangaInfo.bookInfo.id;t.folder("META-INF"),t.folder("OEBPS/image"),t.folder("OEBPS/text"),t.folder("OEBPS/style");var a=u["default"]["navigation-documents.xhtml"],r=e.mangaInfo.contents.map(function(e){return 1===e.refindex?'<li><a href="text/p_cover.xhtml">'+d(e.text)+"</a></li>":'<li><a href="text/p_'+f(e.refindex-2,4)+'.xhtml">'+d(e.text)+"</a></li>"}).join("\n");a=a.replace("<!-- navigation-list -->",r);var l=u["default"]["standard.opf"],c=e.pageInfo.list.map(function(e,t){var n=i["default"].getBlobObject(e),a=String(n.type);if(0===t)return'<item id="cover" href="image/cover.'+a.slice(6)+'" media-type="'+a+'" properties="cover-image"></item>';var r=f(t-1,4);return'<item id="i_'+r+'" href="image/i_'+r+"."+a.slice(6)+'" media-type="'+a+'"></item>'}).join("\n"),m=e.pageInfo.list.map(function(e,t){if(0===t)return"";var n=f(t-1,4);return'<item id="p_'+n+'" href="text/p_'+n+'.xhtml" media-type="application/xhtml+xml" properties="svg" fallback="i_'+n+'"></item>'}).join("\n"),p=e.pageInfo.direction,h=e.pageInfo.list.map(function(e,t){return p="left"===p?"right":"left",0===t?"":'<itemref linear="yes" idref="p_'+f(t-1,4)+'" properties="page-spread-'+p+'"></itemref>'}).join("\n"),g=String(e.mangaInfo.bookInfo.creator.length).length+1,b=e.mangaInfo.bookInfo.creator.map(function(e,t){var n=f(t+1,g);return'<dc:creator id="creator'+n+'">'+d(e)+'</dc:creator>\n<meta refines="#creator'+n+'" property="role" scheme="marc:relators">aut</meta>\n<meta refines="#creator'+n+'" property="file-as"></meta>\n<meta refines="#creator'+n+'" property="display-seq">'+t+"</meta>"}).join("\n");l=l.replace("{{uuid}}",n).replace("{{title}}",d(e.mangaInfo.bookInfo.title)).replace("<!-- creator-list -->",b).replace("{{subject}}",d(e.mangaInfo.bookInfo.subject)).replace("{{publisher}}",d(e.mangaInfo.bookInfo.publisher)).replace("{{createTime}}",(new Date).toISOString()).replace("<!-- item-image -->",c).replace("<!-- item-xhtml -->",m).replace("<!-- itemref-xhtml -->",h).replace("{{direction}}","right"===e.pageInfo.direction?' page-progression-direction="rtl"':"");var y={};return e.pageInfo.list.map(function(t,n){var a=e.pageInfo.viewport,r=a.position,o=a.width,l=a.height,c=n>0?f(n-1,4):"cover",s="none";"fit"===r&&(s="xMidYMid meet"),"fill"===r&&(s="xMidYMid slice"),y["p_"+c+".xhtml"]=u["default"]["page.xhtml"].replace("{{title}}",d(e.mangaInfo.bookInfo.title)).replace(new RegExp("{{width}}","gm"),o).replace(new RegExp("{{height}}","gm"),l).replace("{{image file src}}","../image/"+(n>0?"i_":"")+c+"."+String(i["default"].getBlobObject(t).type).slice(6)).replace("{{position}}",s)}),t.file("mimetype",u["default"].mimetype),t.file("META-INF/container.xml",u["default"]["container.xml"]),t.file("OEBPS/style/fixed-layout-jp.css",u["default"]["fixed-layout-jp.css"]),t.file("OEBPS/navigation-documents.xhtml",a),t.file("OEBPS/standard.opf",l),e.pageInfo.list.map(function(e,n){var a=i["default"].getBlobObject(e),r=n>0?"i_"+f(n-1,4):"cover";t.file("OEBPS/image/"+r+"."+String(a.type).slice(6),a)}),Object.keys(y).map(function(e){t.file("OEBPS/text/"+e,y[e])}),new Promise(function(n){t.generateAsync({type:"blob",mimeType:"application/epub+zip"}).then(function(t){var a=document.createElement("a"),r=window.URL.createObjectURL(t);a.download=e.mangaInfo.bookInfo.title.trim()+".epub",a.href=r,a.click(),window.URL.revokeObjectURL(r),n()})})};t["default"]=m},304:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=n(15),o=a(r),l=n(101),i=a(l),c=n(55),u=n(302),d=a(u),f=n(299),s=a(f),m=document.getElementById("body"),p=o["default"].createElement(c.Provider,{store:d["default"]},o["default"].createElement(s["default"],null));i["default"].render(p,m)},305:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),o=n(307),l=a(o),i=n(306),c=a(i),u=n(78),d=(0,u.undoable)((0,r.combineReducers)({pageInfo:l["default"],mangaInfo:c["default"]}));t["default"]=d},306:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o,l=n(78),i=a(l),c=n(146),u={bookInfo:{id:"",title:"",creator:[""],subject:"",publisher:""},ncxTitle:"目次/Table of Contents",contents:[{refindex:1,text:"表紙"}]},d=(o={},r(o,c.ActionType.SAVE_BOOKINFO,function(e,t){var n=t.bookInfo;return e.bookInfo=n,e}),r(o,c.ActionType.ADD_CREATOR,function(e,t){var n=t.index,a=e.bookInfo.creator[n];return e.bookInfo.creator.splice(n,1,a,""),e}),r(o,c.ActionType.REMOVE_CREATOR,function(e,t){var n=t.index;return e.bookInfo.creator.splice(n,1),e}),r(o,c.ActionType.SAVE_CONTENTS_SETTING,function(e,t){var n=t.data;return e.contents=n,e}),o);t["default"]=(0,i["default"])(u,d)},307:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var l,i=n(78),c=a(i),u=n(147),d=n(27),f=(a(d),{viewport:{height:2400,width:1600,position:"stretch",backgroundColor:"white"},list:[],direction:"right"}),s=(l={},r(l,u.ActionType.IMPORT_PAGES,function(e,t){var n=t.newFileIndexList;return e.list=[].concat(o(e.list),o(n)),e}),r(l,u.ActionType.SET_COVER_PAGE,function(e,t){var n=t.index,a=e.list.splice(n,1);return e.list.unshift(a),e}),r(l,u.ActionType.REMOVE_PAGE,function(e,t){var n=t.index;e.list.splice(n,1);return e}),r(l,u.ActionType.MOVE_TO_NEXT_PAGE,function(e,t){var n=t.index,a=n+1===e.list.length?n:n+1,r=e.list[n],o=e.list[a];return e.list[n]=o,e.list[a]=r,e}),r(l,u.ActionType.MOVE_TO_PREVIOUS_PAGE,function(e,t){var n=t.index,a=n-1<0?0:n-1,r=e.list[n],o=e.list[a];return e.list[n]=o,e.list[a]=r,e}),r(l,u.ActionType.CHANGE_PAGE_INDEX,function(e,t){var n=t.originIndex,a=t.newIndex,r=e.list[n],o=e.list[a];return n<a&&(e.list.splice(a,1,o,r),e.list.splice(n,1)),n>a&&(e.list.splice(n,1),e.list.splice(a,1,r,o)),e}),r(l,u.ActionType.CUT_PAGE,function(e,t){var n=t.index,a=t.blobIndex;return e.list.splice(n,1,a[1],a[0]),e}),r(l,u.ActionType.ADD_BLANK_PAGE,function(e,t){var n=t.index,a=t.newBlobIndex,r=e.list[n];return e.list.splice(n,1,a,r),e}),r(l,u.ActionType.SAVE_VIEWPORT_SETTING,function(e,t){var n=t.width,a=t.height,r=t.position,o=t.backgroundColor,l=t.direction;return e.viewport={width:Number(n),height:Number(a),position:r,backgroundColor:o},e.direction=l,e}),l);t["default"]=(0,c["default"])(f,s)},308:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={"container.xml":'<?xml version="1.0"?>\n<container\n version="1.0"\n xmlns="urn:oasis:names:tc:opendocument:xmlns:container"\n>\n<rootfiles>\n<rootfile\n full-path="OEBPS/standard.opf"\n media-type="application/oebps-package+xml"\n/>\n</rootfiles>\n</container>',mimetype:"application/epub+zip","page.xhtml":'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE html>\n<html\n xmlns="http://www.w3.org/1999/xhtml"\n xmlns:epub="http://www.idpf.org/2007/ops"\n xml:lang="ja"\n>\n<head>\n<meta charset="UTF-8" />\n<title>{{title}}</title>\n<link rel="stylesheet" type="text/css" href="../style/fixed-layout-jp.css"/>\n<meta name="viewport" content="width={{width}}, height={{height}}"/>\n</head>\n<body>\n<div class="main">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1"\n xmlns:xlink="http://www.w3.org/1999/xlink"\n width="100%" height="100%" viewBox="0 0 {{width}} {{height}}">\n<image width="100%" height="100%" preserveAspectRatio="{{position}}" xlink:href="{{image file src}}" />\n</svg>\n</div>\n</body>\n</html>',"fixed-layout-jp.css":'@charset "UTF-8";\n\nhtml,\nbody {\n    margin:    0;\n    padding:   0;\n    font-size: 0;\n}\nsvg {\n    margin:    0;\n    padding:   0;\n}',"standard.opf":'<?xml version="1.0" encoding="UTF-8"?>\n<package xmlns="http://www.idpf.org/2007/opf" unique-identifier="bookid" version="3.0" prefix="rendition: http://www.idpf.org/vocab/rendition/#">\n<metadata xmlns="http://www.idpf.org/2007/opf" xmlns:dc="http://purl.org/dc/elements/1.1/">\n\n<!-- 作品名 -->\n<dc:title id="title">{{title}}</dc:title>\n<meta refines="#title" property="file-as"></meta>\n\n<!-- 著者名 -->\n<!-- creator-list -->\n\n<dc:subject>{{subject}}</dc:subject>\n\n<!-- 出版社名 -->\n<dc:publisher id="publisher">{{publisher}}</dc:publisher>\n<meta refines="#publisher" property="file-as"></meta>\n\n<!-- 言語 -->\n<dc:language>ja</dc:language>\n\n<!-- ファイルid -->\n<dc:identifier id="bookid">urn:uuid:{{uuid}}</dc:identifier>\n\n<!-- 更新日 -->\n<meta property="dcterms:modified">{{createTime}}</meta>\n\n<!-- Fixed-Layout Documents指定 -->\n<meta property="rendition:layout">pre-paginated</meta>\n<meta property="rendition:spread">none</meta>\n\n<!-- etc. -->\n<meta property="ebpaj:guide-version">1.1</meta>\n<meta name="SpineColor" content="#FFFFFF"></meta>\n<meta name="cover" content="cover"></meta>\n\n</metadata>\n\n<manifest>\n\n<!-- navigation -->\n<item media-type="application/xhtml+xml" id="toc" href="navigation-documents.xhtml" properties="nav"></item>\n\n<!-- style -->\n<item media-type="text/css" id="fixed-layout-jp" href="style/fixed-layout-jp.css"></item>\n\n<!-- image -->\n<!-- item-image -->\n\n<!-- text -->\n<item id="p-cover" href="text/p_cover.xhtml" media-type="application/xhtml+xml" properties="svg" fallback="cover"></item>\n<!-- item-xhtml -->\n\n</manifest>\n\n<spine{{direction}}>\n\n<itemref linear="yes" idref="p-cover" properties="rendition:page-spread-center"></itemref>\n<!-- itemref-xhtml -->\n\n</spine>\n\n</package>',"navigation-documents.xhtml":'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="ja">\n<head>\n<meta charset="UTF-8"></meta>\n<title>Navigation</title>\n</head>\n<body>\n<nav epub:type="toc" id="toc">\n<h1>Navigation</h1>\n<ol>\n<!-- navigation-list -->\n</ol>\n</nav>\n<nav epub:type="landmarks">\n<ol>\n<li><a epub:type="bodymatter" href="text/p_cover.xhtml">Start of Content</a></li>\n</ol>\n</nav>\n</body>\n</html>'};t["default"]=n}});
